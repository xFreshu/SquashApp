generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_PRISMA_DATABASE_URL")
}

model Player {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  name      String   @unique

  matchesAsPlayerOne Match[] @relation("PlayerOneMatches")
  matchesAsPlayerTwo Match[] @relation("PlayerTwoMatches")
  wins               Match[] @relation("Winner")
}

model Match {
  id                Int      @id @default(autoincrement())
  createdAt         DateTime @default(now())
  durationInSeconds Int
  playerOneId       Int
  playerOne         Player   @relation("PlayerOneMatches", fields: [playerOneId], references: [id])
  playerTwoId       Int
  playerTwo         Player   @relation("PlayerTwoMatches", fields: [playerTwoId], references: [id])
  playerOneScore    Int
  playerTwoScore    Int
  winnerId          Int
  winner            Player   @relation("Winner", fields: [winnerId], references: [id])
}
